<!doctype html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Admin Dashboard | Mod Control</title>

    <link
      href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Poppins:wght@300;400;600&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
    />

    <link rel="stylesheet" href="style.css" />

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  </head>
  <body>
    <div id="modal-confirm" class="modal-overlay">
      <div class="modal-box modal-danger">
        <h3><i class="fa-solid fa-triangle-exclamation"></i> X√ÅC NH·∫¨N X√ìA</h3>
        <p style="text-align: center; color: #ccc; margin-bottom: 20px">
          B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a m·ª•c n√†y kh√¥ng?<br />
          <span style="font-size: 0.8rem; color: #777"
            >(H√†nh ƒë·ªông n√†y c·∫ßn b·∫•m L∆∞u ƒë·ªÉ √°p d·ª•ng)</span
          >
        </p>
        <div class="btn-group-modal">
          <button class="btn-modal btn-cancel" onclick="closeConfirmModal()">
            H·ªßy B·ªè
          </button>
          <button
            class="btn-modal btn-delete-confirm"
            onclick="executeDelete()"
          >
            X√≥a Lu√¥n
          </button>
        </div>
      </div>
    </div>
    <div id="loading-overlay">
      <div class="spinner"></div>
      <div style="color: var(--primary)">CONNECTING...</div>
    </div>
    <div id="custom-toast">
      <div class="toast-icon"></div>
      <div class="toast-content">
        <h4>Th√¥ng b√°o</h4>
        <p id="toast-message"></p>
      </div>
    </div>

    <div id="modal-import-key" class="modal-overlay">
      <div class="modal-box">
        <h3><i class="fa-solid fa-file-import"></i> N·∫†P KEY</h3>

        <div class="form-group">
          <label>Ch·ªçn Lo·∫°i G√≥i</label>
          <select id="import-type"></select>
        </div>

        <p style="color: #aaa; font-size: 0.9rem; margin-bottom: 10px">
          Danh s√°ch Key (M·ªói d√≤ng 1 key):
        </p>
        <textarea
          id="bulk-keys"
          class="bulk-input"
          placeholder="KEY-001&#10;KEY-002"
        ></textarea>

        <div class="btn-group-modal">
          <button
            class="btn-modal btn-cancel"
            onclick="
              document
                .getElementById('modal-import-key')
                .classList.remove('show')
            "
          >
            ƒê√≥ng
          </button>
          <button class="btn-modal btn-confirm" onclick="importKeys()">
            N·∫°p Ngay
          </button>
        </div>
      </div>
    </div>

    <div id="modal-add" class="modal-overlay">
      <div class="modal-box">
        <h3><span id="modal-title">TH√äM M·ªöI</span></h3>
        <div class="form-group">
          <label id="modal-label-name">T√™n</label
          ><input type="text" id="new-item-name" />
        </div>
        <div class="form-group">
          <label id="modal-label-value">Gi√° tr·ªã</label
          ><input type="text" id="new-item-value" />
        </div>
        <div class="btn-group-modal">
          <button class="btn-modal btn-cancel" onclick="toggleModal(false)">
            H·ªßy
          </button>
          <button class="btn-modal btn-confirm" onclick="confirmAddItem()">
            Th√™m
          </button>
        </div>
      </div>
    </div>

    <div class="sidebar">
      <div class="logo">MOD<span>PANEL</span></div>
      <div class="menu-item active" onclick="switchTab('stats', this)">
        <i class="fa-solid fa-chart-line"></i> <span>Dashboard</span>
      </div>
      <div class="menu-item" onclick="switchTab('keys', this)">
        <i class="fa-solid fa-key"></i> <span>Kho Key</span>
      </div>
      <div class="menu-item" onclick="switchTab('config', this)">
        <i class="fa-solid fa-sliders"></i> <span>C·∫•u h√¨nh</span>
      </div>
      <div class="menu-item" onclick="switchTab('coupons', this)">
        <i class="fa-solid fa-ticket"></i> <span>M√£ gi·∫£m gi√°</span>
      </div>
      
    </div>

    <div class="main">
      <div id="tab-stats" class="tab-content active">
        <h2 style="margin-bottom: 20px">Dashboard</h2>
        <div class="grid">
          <div class="card">
            <h3>Doanh Thu</h3>
            <h2 id="view-revenue" style="font-size: 2rem">...</h2>
          </div>
          <div class="card">
            <h3>ƒê∆°n H√†ng</h3>
            <h2 id="view-orders" style="font-size: 2rem">...</h2>
          </div>
        </div>
        <div class="card" style="margin-top: 25px">
          <canvas id="revenueChart"></canvas>
        </div>
      </div>

      <div id="tab-keys" class="tab-content">
        <h2 style="margin-bottom: 20px">Kho License</h2>
        <div class="grid" style="margin-bottom: 20px">
          <div class="card" style="padding: 20px">
            <h4>Key Active</h4>
            <h2 id="stat-active" style="color: var(--success)">0</h2>
          </div>
          <div class="card" style="padding: 20px">
            <h4>Key Used</h4>
            <h2 id="stat-used" style="color: var(--danger)">0</h2>
          </div>
        </div>
        <div class="card">
          <div class="card-header">
            <h3>Danh s√°ch Key</h3>
            <button
              class="btn-add-small"
              onclick="
                document
                  .getElementById('modal-import-key')
                  .classList.add('show')
              "
              style="width: auto; padding: 0 15px; border-radius: 6px"
            >
              <i class="fa-solid fa-upload"></i> N·∫°p Key
            </button>
          </div>
          <div class="table-container">
            <table class="key-table">
              <thead>
                <tr>
                  <th>STT</th>
                  <th>Key</th>
                  <th>Lo·∫°i G√≥i</th>
                  <th>Tr·∫°ng th√°i</th>
                  <th>M√£ GD</th>
                  <th>X√≥a</th>
                </tr>
              </thead>
              <tbody id="key-list-body"></tbody>
            </table>
          </div>
        </div>
      </div>

      <div id="tab-config" class="tab-content">
        <h2 style="margin-bottom: 20px">C·∫•u h√¨nh H·ªá th·ªëng</h2>
        <div class="grid">
          <div class="card">
            <div class="card-header">
              <h3>Gi√° B√°n</h3>
              <button class="btn-add-small" onclick="openModal('price')">
                +
              </button>
            </div>
            <div id="price-container"></div>
          </div>
          <div class="card">
            <div class="card-header">
              <h3>Link T·∫£i</h3>
              <button class="btn-add-small" onclick="openModal('link')">
                +
              </button>
            </div>
            <div id="link-container"></div>
          </div>
        </div>
        <button class="btn-save-mini" onclick="saveData()">
          <i class="fa-solid fa-floppy-disk"></i> L∆∞u C·∫•u H√¨nh
        </button>
              <div class="card">
    <h3>üîß Qu·∫£n l√Ω h·ªá th·ªëng</h3>
    <div class="maintenance-container">
        <div class="status-info">
            <span>Tr·∫°ng th√°i trang ng∆∞·ªùi d√πng: </span>
            <strong id="maintenance-status-text">ƒêang t·∫£i...</strong>
        </div>
        <label class="switch">
            <input type="checkbox" id="maintenance-toggle" onchange="handleMaintenanceChange()">
            <span class="slider round"></span>
        </label>
        <p class="note">Khi b·∫≠t, ng∆∞·ªùi d√πng s·∫Ω kh√¥ng th·ªÉ truy c·∫≠p trang ch·ªß.</p>
    </div>
</div>
      </div>
      <div id="tab-coupons" class="tab-content">
        <h2 style="margin-bottom: 20px">Qu·∫£n l√Ω M√£ gi·∫£m gi√°</h2>
        <div class="grid" style="grid-template-columns: 1fr 2fr; gap: 20px">
          <div class="card">
            <h3><i class="fa-solid fa-plus-circle"></i> T·∫°o M√£ M·ªõi</h3>
            <div class="form-group" style="margin-top: 15px">
              <label>M√£ (Code)</label>
              <input type="text" id="cp-code" placeholder="VD: KM50" />
            </div>
            <div class="form-group">
              <label>Lo·∫°i gi·∫£m gi√°</label>
              <select id="cp-type">
                <option value="PERCENT">Ph·∫ßn trƒÉm (%)</option>
                <option value="FIXED">Ti·ªÅn m·∫∑t (VNƒê)</option>
              </select>
            </div>
            <div class="form-group">
              <label>Gi√° tr·ªã gi·∫£m</label>
              <input type="number" id="cp-value" placeholder="10 ho·∫∑c 20000" />
            </div>
            <div class="form-group">
              <label>S·ªë l∆∞·ª£ng m√£</label>
              <input type="number" id="cp-limit" placeholder="100" />
            </div>
            <button
              class="btn-confirm"
              style="width: 100%"
              onclick="submitCoupon()"
            >
              T·∫°o M√£ Ngay
            </button>
          </div>

          <div class="card">
            <h3>Danh s√°ch ƒë√£ t·∫°o</h3>
            <div class="table-container">
              <table class="key-table">
                <thead>
                  <tr>
                    <th>M√£</th>
                    <th>Gi·∫£m</th>
                    <th>Lo·∫°i</th>
                    <th>ƒê√£ d√πng</th>
                    <th>H√†nh ƒë·ªông</th>
                  </tr>
                </thead>
                <tbody id="coupon-list-body"></tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script src="script.js"></script>
  </body>
</html>
